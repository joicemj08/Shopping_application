<html dir="ltr" lang="en"><!--<![endif]-->
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Home-Shopping application</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
<script src="//code.jquery.com/jquery-1.10.2.js"></script>
<script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
<link href="//fonts.googleapis.com/css?family=Open+Sans:400,400i,300,700" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="/css/style_home.css" media="all">
<%= stylesheet_link_tag    'home', media: 'all', 'data-turbolinks-track' => true %>
<%= javascript_include_tag 'home', 'data-turbolinks-track' => true %>
<%= csrf_meta_tags %>
<style>
  .ui-autocomplete-category {
    font-weight: bold;
    padding: .2em .4em;
    margin: .8em 0 .2em;
    line-height: 1.5;
  }
  </style>

</head>
<body class="common-home">
  <nav id="top">
    <div class="container">
      <div class="pull-left">
          <div class="btn-group">
          </div>
      </div>
      <div id="top-links" class="nav pull-right">
        <ul class="list-inline">
          <li class="dropdown">
            <% if user_signed_in? %>
              <li>
                  <%= link_to(current_user, user_path(current_user)) %>
              </li>
              <li>
                  <%= link_to "Sign Out", destroy_user_session_path, method: :delete %>
              </li>
              <li>

              </li>
            <% else %>
              <li>
                <button data-toggle="modal" data-target="#myModal">
                  Register
                </button>
                <div class="modal fade" id="myModal" role="dialog">
                  <div class="modal-dialog">
                    <div class="modal-content">
                      <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">Sign up</h4>
                      </div>
                      <div class="modal-body">
                        <div id='error'></div>
                        <%= form_for(@user) do |f| %>

                          <div class="field">
                            <div class="form-group field">
                              <%= f.label :First_name %><br />
                              <%= f.text_field :first_name, autofocus: true %>
                            </div>
                          </div>

                          <div class="field">
                            <div class="form-group field">
                              <%= f.label :Last_name %><br />
                              <%= f.text_field :last_name, autofocus: true %>
                            </div>
                          </div>

                          <div class="field">
                            <div class="form-group field">
                              <%= f.label :email %><br />
                              <%= f.email_field :email, autofocus: true %>
                            </div>
                          </div>

                          <div class="field">
                            <div class="form-group field">
                              <%= f.label :password %>
                              <% if @minimum_password_length %>
                              <em>(<%= @minimum_password_length %> characters minimum)</em>
                              <% end %><br />
                              <%= f.password_field :password, autocomplete: "off" %>
                            </div>
                          </div>

                          <div class="field">
                            <div class="form-group field">
                              <%= f.label :password_confirmation %><br />
                              <%= f.password_field :password_confirmation, autocomplete: "off" %>
                            </div>
                          </div>

                          <div class="actions">
                            <%= f.submit "Sign up", :OnClick =>'validateForm()', :class=>'btn btn-success' %>
                          </div>

                        <% end %>
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                      </div>
                    </div>
                  </div>
                </div>
              </li>
              <li>
                <button>
                  <%= link_to "Login", new_user_session_path %>
                </button>
              </li>
            <% end %>
          </li>
        </ul>
      </div>
    </div>
  </nav>
  <header>
      <div class="container">
          <div class="row">
            <div class="col-sm-4">
              <div id="logo">
                    <h2>QUICK DEALS</h2>
                        </div>
            </div>
            <div class="col-sm-5"> </div>
            <div class="col-sm-3">
              <div id="cart" class="btn-group btn-block">
                <button type="button" data-toggle="dropdown" data-loading-text="Loading..." class="btn btn-inverse btn-block btn-lg dropdown-toggle"><i class="fa fa-shopping-cart"></i>
                  <span id="cart-total">0 item(s) - $0.00</span>
                </button>
                <ul class="dropdown-menu pull-right"><li>
                    <p class="text-center">Your shopping cart is empty!</p>
                  </li></ul>
              </div>
            </div>
          </div>
        </div>
      </div>
</header>
<%= yield %>

<footer>
  <div class="container">
    <div class="row">
          <div class="col-sm-3">
              <h5></h5>
                <ul class="list-unstyled">
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                </ul>
          </div>
    </div>

    <p><center>copyright Â© joice@qburst.com</center></p>
  </div>
</footer>

<script>
function validateForm(){
    var email = $('#user_email').val();
    var password = $('#user_password').val();
    var confirm_password = $('#user_password_confirmation').val();
    function isValidEmailAddress(emailAddress) {
      var pattern = new RegExp(/^[+a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/i);
      return pattern.test(emailAddress);
    };
    flag = 0;
    $("#error").html (' ');
    if( !isValidEmailAddress( email ) ){
      $("#error").append("<br>* email is not valid");
       flag = 1;
    }
    if (password != confirm_password){
      $("#error").append("<br>* passwords doesn't match");
      flag = 1;
    }
    else if(password.length < 8){
      $("#error").append("<br>* password is too short(minimun 8 characters");
       flag = 1;
    }

    else if (quantity.length == 0){
      $("#error").append("<br>* Quantity shoud not be blank");
       flag = 1;
    }
    if (flag == 0)
      $("#new_user").submit();
  }


</script>