<div class="thumbnail" style="padding:20px">
  <h2>PRODUCTS</h2>
  <div id="error"></div>
<%= form_for(@product) do |f| %>
 <p>
    <%= f.label :Name %><br>
    <%= f.text_field :name %>
  </p>

  <p>
   <%= f.label :CategoryID %><br>
  <%= f.collection_select(:category_id, Category.all, :id, :name) %>
  </p>
  <p>
    <%= f.label :Unitprice %><br>
    <%= f.text_field :unit_price %>
  </p>
  <p>
    <%= f.label :Quantity %><br>
    <%= f.text_field :quantity %>
  </p>
  <p>
      <strong>Add photo</strong>
      <%= f.file_field :avatar %>
    </p>
  <p>
    <%=f.button :submit, :type=>'button', :OnClick =>'validateForm()' %>

  </p>
<% end %>
 <script>
function validateForm(){
    var name = $('#product_name').val();
    var unitprice = $('#product_unit_price').val();
    var quantity = $('#product_quantity').val();
    var check_unitprice = isNaN(unitprice)
    var check_quantity = isNaN(quantity)
    flag = 0;
    $("#error").html (' ');
    if (name.length <=3 ){

      $("#error").append("<br>* Code is too short (minimum is 3 characters) ");
      flag = 1;
    }
    if (check_unitprice){
      $("#error").append("<br>* Unit price should be a number");
      flag = 1;
    }
    else if(unitprice.length == 0){
      $("#error").append("<br>* Unit price shoud not be blank");
       flag = 1;
    }
    if (check_quantity){
      $("#error").append("<br>* Quantity should be a number");
       flag = 1;
    }
    else if (quantity.length == 0){
      $("#error").append("<br>* Quantity shoud not be blank");
       flag = 1;
    }
    if (flag == 0)
      $("#new_product").submit();


  }
</script>
</div>
